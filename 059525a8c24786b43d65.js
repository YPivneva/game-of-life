const canvas=document.getElementById("mainBoxId"),ctx=canvas.getContext("2d");var timer,mas=[],count=0;function goLife(){for(let t=0;t<30;t++){mas[t]=[];for(let e=0;e<30;e++)mas[t][e]=0}}function drawField(){ctx.clearRect(0,0,300,300);for(let t=0;t<30;t++)for(let e=0;e<30;e++)1==mas[t][e]&&ctx.fillRect(10*e,10*t,10,10)}function startLife(){let t=[];for(let e=0;e<30;e++){t[e]=[];for(let n=0;n<30;n++){let o=0;1==mas[fpm(e)-1][n]&&o++,1==mas[e][fpp(n)+1]&&o++,1==mas[fpp(e)+1][n]&&o++,1==mas[e][fpm(n)-1]&&o++,1==mas[fpm(e)-1][fpp(n)+1]&&o++,1==mas[fpp(e)+1][fpp(n)+1]&&o++,1==mas[fpp(e)+1][fpm(n)-1]&&o++,1==mas[fpm(e)-1][fpm(n)-1]&&o++,t[e][n]=2===o||3===o?1:0}}mas=t,drawField(),count++,document.getElementById("count").innerHTML=count,timer=setTimeout(startLife,300)}function fpm(t){return 0==t?30:t}function fpp(t){return 29==t?-1:t}function resetToDefault(){ctx.clearRect(0,0,300,300),document.getElementById("count").innerHTML=0,clearTimeout(timer)}document.getElementById("mainBoxId").onclick=function(t){let e=t.offsetX,n=t.offsetY;e=Math.floor(e/10),n=Math.floor(n/10),mas[n][e]=1,drawField()},goLife(),document.getElementById("start").onclick=startLife,document.getElementById("reset").onclick=resetToDefault;